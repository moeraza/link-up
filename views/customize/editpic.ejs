<% include ../partials/header %>


<div class="container justify-content-center">
  <div class="row text-center">
    <div class="col-12 col-md-6">
        <div id="page">
    <div id="demo"></div> 
      
  </div>
  <button type="button" id="cropImageBtn" class="btn btn-primary">Crop</button>
    </div>

  
  </div>

</div>

  <img src="" class="gambar" id="item-img-output" />
<form action="/<%=thisUser.username%>/picupload/edit/post" method="POST">
    <div class="form-group">
      <input type="text" id="imgInputField" class="form-control" name="imgInputField">
      <button>Submit</button>
  </div>
</form>

<p id="putUrlHere"></p>

<script>


var basic = $('#demo').croppie({
    viewport: {
        width: 200,
        height: 200,
        type: 'circle'
    }
});
basic.croppie('bind', {
    url: "<%=thisUser.avatar %>",
    points: [77,469,280,739]
});
//on button click
// basic.croppie('result', 'html').then(function(html) {
//     // html is div (overflow hidden)
//     // with img positioned inside.
// });

$('#cropImageBtn').on('click', function (ev) {
	basic.croppie('result', {
		type: 'base64',
		format: 'jpeg',
		size: 'original'
	}).then(function (resp) {
	  $('#item-img-output').attr('src', resp);
	 // $('#putUrlHere').append(resp);
	 $('#imgInputField').val($('#imgInputField').val() + resp);

	  
	});
});



</script>


<% include ../partials/footer %>
